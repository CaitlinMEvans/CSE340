<h1><%= title %></h1>
<%- messages() %> <% if (locals.errors) { %>
<ul class="notice">
  <% locals.errors.array().forEach(error => { %>
  <li><%= error.msg %></li>
  <% }) %>
</ul>
<% } %>

<form id="registerForm" action="/account/register" method="post">
  <fieldset>
    <legend>Create your account</legend>

    <label for="account_firstname">First Name:</label>
    <input
      type="text"
      id="account_firstname"
      name="account_firstname"
      required
      placeholder="Enter your first name"
      value="<%= locals.account_firstname %>"
    />

    <label for="account_lastname">Last Name:</label>
    <input
      type="text"
      id="account_lastname"
      name="account_lastname"
      required
      placeholder="Enter your last name"
      value="<%= locals.account_lastname %>"
    />

    <label for="account_email">Email Address:</label>
    <input
      type="email"
      id="account_email"
      name="account_email"
      required
      placeholder="Enter your email"
      value="<%= locals.account_email %>"
    />

    <label for="account_password">Password:</label>
    <span class="password-requirements"
      >Passwords must be at least 12 characters and contain at least 1 number, 1
      capital letter and 1 special character</span
    >
    <div class="password-wrapper">
      <input
        type="password"
        id="account_password"
        name="account_password"
        required
        placeholder="Enter your password"
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      />
      <button type="button" id="togglePassword" class="toggle-password">
        <span id="toggleText">Show</span>
      </button>
    </div>

    <button type="submit" class="register-btn">Register</button>
  </fieldset>
</form>

<p class="login-link">
  Already have an account? <a href="/account/login">Log in here</a>
</p>

<script>
  const togglePassword = document.getElementById("togglePassword");
  const passwordInput = document.getElementById("account_password");
  const toggleText = document.getElementById("toggleText");

  togglePassword.addEventListener("click", function () {
    const type =
      passwordInput.getAttribute("type") === "password" ? "text" : "password";
    passwordInput.setAttribute("type", type);
    toggleText.textContent = type === "password" ? "Show" : "Hide";
  });
</script>
